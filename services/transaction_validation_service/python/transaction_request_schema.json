{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Fraud Detection Transaction Request",
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "request_id": {
      "type": "string",
      "description": "Optional caller-provided request identifier. If missing, the service will generate one."
    },
    "transaction": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "transaction_id",
        "event_time_utc",
        "amount",
        "currency",
        "merchant_category",
        "channel",
        "country",
        "customer_age",
        "account_age_days",
        "transactions_last_24h",
        "avg_amount_last_7d",
        "is_international"
      ],
      "properties": {
        "transaction_id": { "type": "string", "minLength": 1 },
        "event_time_utc": {
          "type": "string",
          "format": "date-time",
          "description": "UTC timestamp in ISO 8601 format, e.g., 2026-01-05T21:15:00Z"
        },
        "amount": { "type": "number", "exclusiveMinimum": 0 },
        "currency": {
          "type": "string",
          "pattern": "^[A-Z]{3}$",
          "description": "3-letter ISO currency code, e.g., CAD"
        },
        "merchant_category": {
          "type": "string",
          "minLength": 1,
          "description": "Lowercase category slug, e.g., grocery"
        },
        "channel": {
          "type": "string",
          "enum": ["card_present", "card_not_present", "online", "atm", "transfer"]
        },
        "country": {
          "type": "string",
          "pattern": "^[A-Z]{2}$",
          "description": "2-letter ISO country code, e.g., CA"
        },
        "customer_age": { "type": "integer", "minimum": 13, "maximum": 120 },
        "account_age_days": { "type": "integer", "minimum": 0 },
        "transactions_last_24h": { "type": "integer", "minimum": 0 },
        "avg_amount_last_7d": { "type": "number", "minimum": 0 },
        "is_international": { "type": "boolean" }
      }
    }
  },
  "required": ["transaction"]
}
